<div class="salesman-container">
    <h1>Salesman Information</h1>
    <div class="salesman-details">
        <p><b>SID:</b> {{ salesman.sid }}</p>
        <p><b>Name:</b> {{ salesman.firstname + " " + salesman.lastname}}</p>
        <p><b>Department:</b> Unknown</p>
        <p><b>Year of Performance:</b> {{ this.year }}</p>
    </div>

    <div class="tab-section">
        <div class="tab">
            <h2>Order Evaluation</h2>
            <table mat-table [dataSource]="orderEvaluationData" class="mat-elevation-z8 custom-table">
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef>Name of Product</th>
                    <td mat-cell *matCellDef="let element">{{ element.name }}</td>
                </ng-container>

                <ng-container matColumnDef="number">
                    <th mat-header-cell *matHeaderCellDef>Product Number</th>
                    <td mat-cell *matCellDef="let element">{{ element.number }}</td>
                </ng-container>

                <ng-container matColumnDef="client-ranking">
                    <th mat-header-cell *matHeaderCellDef>Client Ranking</th>
                    <td mat-cell *matCellDef="let element">{{ element.client_ranking }}</td>
                </ng-container>

                <ng-container matColumnDef="items">
                    <th mat-header-cell *matHeaderCellDef>Items</th>
                    <td mat-cell *matCellDef="let element">{{ element.items }}</td>
                </ng-container>

                <ng-container matColumnDef="bonus">
                    <th mat-header-cell *matHeaderCellDef>Bonus</th>
                    <td mat-cell *matCellDef="let element">
                        <!-- If a CEO is logged in, he should be able to change the bonus -->
                        <div *ngIf="this.userRole === 'ceo' || this.userRole === 'admin'" class="input-field">
                            <input [(ngModel)]="element.bonus" placeholder="Enter Value">
                        </div>

                        <!-- If a Salesman/HR Employee is logged in, he should not be able to change the bonus -->
                        <div *ngIf="(this.userRole === 'hr' || this.userRole === 'salesman')">
                            {{ element.bonus }}
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="comments">
                    <th mat-header-cell *matHeaderCellDef>Comments</th>
                    <td mat-cell *matCellDef="let element">
                        <!-- If a CEO is logged in, he should be able to change the bonus -->
                        <div *ngIf="this.userRole === 'ceo' || this.userRole === 'admin'" class="input-field">
                            <input [(ngModel)]="element.comments" placeholder="Enter Comment">
                        </div>

                        <!-- If a Salesman/HR Employee is logged in, he should not be able to change the bonus -->
                        <div *ngIf="(this.userRole === 'hr' || this.userRole === 'salesman')">
                            {{ element.comments }}
                        </div>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="['name', 'number', 'client-ranking', 'items', 'bonus', 'comments']"></tr>
                <tr mat-row *matRowDef="let row; columns: ['name', 'number', 'client-ranking', 'items', 'bonus', 'comments'];"></tr>
            </table>
            <div class="total-bonus">
                <label class="total-bonus-label">Total Bonus Value: {{ this.orderEvaluationBonus }}</label>
            </div>
        </div>

        <div class="tab">
            <h2>Social Performance Evaluation</h2>
            <table mat-table [dataSource]="socialPerformanceRecordData" class="mat-elevation-z8 custom-table">
                <ng-container matColumnDef="category">
                    <th mat-header-cell *matHeaderCellDef>Category</th>
                    <td mat-cell *matCellDef="let element">{{ element.column1 }}</td>
                </ng-container>

                <ng-container matColumnDef="target-value">
                    <th mat-header-cell *matHeaderCellDef>Target Value</th>
                    <td mat-cell *matCellDef="let element">{{ element.targetValue }}</td>
                </ng-container>

                <ng-container matColumnDef="actual-value">
                    <th mat-header-cell *matHeaderCellDef>Actual Value</th>
                    <td mat-cell *matCellDef="let element">{{ element.actualValue }}</td>
                </ng-container>

                <ng-container matColumnDef="bonus">
                    <th mat-header-cell *matHeaderCellDef>Bonus</th>
                    <td mat-cell *matCellDef="let element">
                        <!-- If a CEO is logged in, he should be able to change the bonus -->
                        <div *ngIf="this.userRole === 'ceo' || this.userRole === 'admin'" class="input-field">
                            <input [(ngModel)]="element.bonus" placeholder="Enter Value">
                        </div>

                        <!-- If a Salesman/HR Employee is logged in, he should not be able to change the bonus -->
                        <div *ngIf="this.userRole === 'hr' || this.userRole === 'salesman'">
                            {{ element.bonus }}
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="comments">
                    <th mat-header-cell *matHeaderCellDef>Comments</th>
                    <td mat-cell *matCellDef="let element">
                        <!-- If a CEO is logged in, he should be able to change the bonus -->
                        <div *ngIf="this.userRole === 'ceo' || this.userRole === 'admin'" class="input-field">
                            <input [(ngModel)]="element.comments" placeholder="Enter Comment">
                        </div>

                        <!-- If a Salesman/HR Employee is logged in, he should not be able to change the bonus -->
                        <div *ngIf="this.userRole === 'hr' || this.userRole === 'salesman'">
                            {{ element.comments }}
                        </div>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="['category', 'target-value', 'actual-value', 'bonus', 'comments']"></tr>
                <tr mat-row *matRowDef="let row; columns: ['category', 'target-value', 'actual-value', 'bonus', 'comments'];"></tr>
            </table>
            <div class="total-bonus">
                <label class="total-bonus-label">Total Bonus Value: {{ this.socialPerformanceRecordBonus }}</label>
            </div>
        </div>

        <div class="tab full-width">
            <h2>Comments</h2>
            <mat-form-field appearance="outline" class="comments-field full-width">
                <mat-label>Comments</mat-label>
                <textarea matInput [(ngModel)]="this.comments" placeholder="Enter your comments here..."></textarea>
            </mat-form-field>
        </div>
    </div>

    <button mat-raised-button color="primary" (click)="submit()" class="submit-button">Submit</button>
</div>
